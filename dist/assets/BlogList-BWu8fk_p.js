import{d as N,r as m,a as R,s as V,o as T,c as h,w as o,b as u,e as r,f as e,g as c,h as b,u as f,i as y,F as B,j as C,t as a,k as U,_ as $}from"./index-Buc8SEyh.js";import{a as E}from"./index-Dq7h7Pqt.js";import{m as w,P as q,u as A}from"./PageLayout-DTTcbtkn.js";import"./monaco-editor-D6KFlyNG.js";const G=E.create({baseURL:"/api",timeout:1e4});function H(g){return G.get("/posts",{params:g})}const J=N("post",()=>{const g=m([]),l=m(1),_=m(10),i=m(0),p=m(!1);async function v(s){p.value=!0;try{const{data:d}=await H({page:(s==null?void 0:s.page)??l.value,pageSize:(s==null?void 0:s.pageSize)??_.value,tag:s==null?void 0:s.tag});g.value=d.list,i.value=d.total,l.value=d.page,_.value=d.pageSize}finally{p.value=!1}}return{posts:g,page:l,pageSize:_,total:i,loading:p,loadPosts:v}}),K={class:"flex items-center justify-between mb-6"},O={class:"relative"},Q=["src"],W={class:"absolute left-3 top-3 bg-white/90 px-2 py-1 text-xs rounded"},X={class:"p-4"},Z={class:"text-xs text-brand uppercase font-medium mb-2"},tt={class:"text-lg font-semibold mb-2"},et={class:"text-gray-500 text-sm mb-3 line-clamp-3"},st={key:1,class:"space-y-5"},nt=["src"],ot={class:"flex-1 p-5 flex flex-col"},at={class:"flex justify-between items-start"},lt={class:"text-xs text-brand uppercase font-medium mb-1"},it={class:"text-lg font-semibold"},rt={class:"text-xs text-gray-400"},ct={class:"text-gray-500 text-sm mt-2 line-clamp-2"},ut={class:"mt-8 flex justify-center"},_t=R({__name:"BlogList",setup(g){const l=m("board"),_=J(),{posts:i,loading:p,total:v,page:s,pageSize:d}=V(_),{loadPosts:k}=_;T(async()=>{try{await k(),i.value.length===0&&(i.value=w,v.value=w.length)}catch{i.value=w,v.value=w.length}});function D(x){k({page:x})}function S(x){return A(x,"YYYY年MM月DD日").value}return(x,n)=>{const z=r("n-button"),L=r("n-button-group"),P=r("n-tag"),j=r("n-card"),M=r("n-grid-item"),Y=r("n-grid"),F=r("n-pagination"),I=r("n-spin");return u(),h(q,null,{default:o(()=>[e("div",K,[n[5]||(n[5]=e("h1",{class:"text-2xl font-bold"},"探索文章",-1)),c(L,{size:"small"},{default:o(()=>[c(z,{type:l.value==="board"?"primary":"default",onClick:n[0]||(n[0]=t=>l.value="board")},{default:o(()=>n[3]||(n[3]=[b("看板")])),_:1,__:[3]},8,["type"]),c(z,{type:l.value==="list"?"primary":"default",onClick:n[1]||(n[1]=t=>l.value="list")},{default:o(()=>n[4]||(n[4]=[b("列表")])),_:1,__:[4]},8,["type"])]),_:1})]),c(I,{show:f(p)},{default:o(()=>[l.value==="board"?(u(),h(Y,{key:0,cols:2,"x-gap":"24","y-gap":"24"},{default:o(()=>[(u(!0),y(B,null,C(f(i),t=>(u(),h(M,{key:t.id},{default:o(()=>[c(j,{hoverable:!0,class:"overflow-hidden p-0"},{default:o(()=>[e("div",O,[e("img",{src:t.coverImage,class:"w-full h-52 object-cover"},null,8,Q),e("span",W,a(S(t.date)),1)]),e("div",X,[e("div",Z,a(t.author),1),e("h3",tt,a(t.title),1),e("p",et,a(t.excerpt),1),c(P,{round:""},{default:o(()=>[b(a(t.tag),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),y("div",st,[(u(!0),y(B,null,C(f(i),t=>(u(),h(j,{key:t.id,hoverable:!0,class:"flex h-56 p-0 overflow-hidden"},{default:o(()=>[e("img",{src:t.coverImage,class:"w-64 h-full object-cover"},null,8,nt),e("div",ot,[e("div",at,[e("div",null,[e("div",lt,a(t.author),1),e("h3",it,a(t.title),1)]),e("span",rt,a(S(t.date)),1)]),e("p",ct,a(t.excerpt),1),c(P,{round:"",class:"mt-auto self-start"},{default:o(()=>[b(a(t.tag),1)]),_:2},1024)])]),_:2},1024))),128))])),e("div",ut,[c(F,{page:f(s),"onUpdate:page":[n[2]||(n[2]=t=>U(s)?s.value=t:null),D],"page-size":f(d),"item-count":f(v)},null,8,["page","page-size","item-count"])])]),_:1},8,["show"])]),_:1})}}}),pt=$(_t,[["__scopeId","data-v-7cc1968b"]]);export{pt as default};
